<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Runner - smolikja team</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #1a1a1a;
            color: #fff;
            padding: 2rem;
            line-height: 1.6;
        }
        .test-header {
            border-bottom: 2px solid #333;
            padding-bottom: 1rem;
            margin-bottom: 2rem;
        }
        .test-results {
            background-color: #2a2a2a;
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }
        .run-tests-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1rem;
            margin-bottom: 1rem;
        }
        .run-tests-btn:hover {
            opacity: 0.9;
        }
        #test-output {
            background-color: #1a1a1a;
            border: 1px solid #333;
            border-radius: 4px;
            padding: 1rem;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h1>🧪 Test Runner</h1>
        <p>Unit tests for the smolikja team portfolio</p>
    </div>

    <button class="run-tests-btn" onclick="runAllTests()">Run All Tests</button>

    <div class="test-results">
        <h2>Test Output</h2>
        <div id="test-output">Click "Run All Tests" to start testing...</div>
    </div>

    <script>
        // Redirect console output to our test output div
        const originalLog = console.log;
        const originalError = console.error;
        const originalGroup = console.group;
        const originalGroupEnd = console.groupEnd;
        const testOutput = document.getElementById('test-output');

        let indent = 0;

        function writeToOutput(message, type = 'log') {
            const indentStr = '  '.repeat(indent);
            const timestamp = new Date().toLocaleTimeString();
            const formattedMessage = `[${timestamp}] ${indentStr}${message}`;
            
            testOutput.textContent += formattedMessage + '\n';
            testOutput.scrollTop = testOutput.scrollHeight;
            
            // Also log to real console
            if (type === 'error') {
                originalError(message);
            } else {
                originalLog(message);
            }
        }

        console.log = function(...args) {
            writeToOutput(args.join(' '), 'log');
        };

        console.error = function(...args) {
            writeToOutput('❌ ERROR: ' + args.join(' '), 'error');
        };

        console.group = function(label) {
            writeToOutput('📂 ' + label);
            indent++;
            originalGroup(label);
        };

        console.groupEnd = function() {
            indent = Math.max(0, indent - 1);
            originalGroupEnd();
        };

        async function runAllTests() {
            testOutput.textContent = '';
            console.log('🚀 Starting test suite...\n');

            try {
                // Load and run ScrollController tests
                await loadScript('src/tests/scrollController.test.js');
                console.log('');

                // Load and run ProjectsComponent tests  
                await loadScript('src/tests/projectsComponent.test.js');
                console.log('');

                // Load and run Timer tests
                await loadScript('src/tests/timerTests.js');
                console.log('');

                console.log('✅ All tests completed!');
            } catch (error) {
                console.error('Failed to load tests:', error);
            }
        }

        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // Initialize test environment
        window.addEventListener('load', () => {
            console.log('🔧 Test environment ready');
            console.log('Click "Run All Tests" to begin testing\n');
        });
    </script>
</body>
</html>
